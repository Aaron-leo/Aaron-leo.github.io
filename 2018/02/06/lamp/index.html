<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="目录
LAMP
什么是LAMP
PHP连接数据库


PHP的配置文件
主要配置


基于LAMP的应用
phpMyAdmin
WordPress
PHPWind
Crossday Discuz! Board


fast CGI
安装包
配置FAST CGI


Centos6编译安装实现LAMP">
    

    <!--Author-->
    
        <meta name="author" content="Aaron">
    

    <!-- Title -->
    
    <title>lamp | Devaron</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <!-- Content -->
    <section class="article-container">
<!-- Back Home -->
<a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

<!-- Page Header -->
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>lamp</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Main Content -->
            <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->
<!-- code_chunk_output -->
<ul>
<li><a href="#目录">目录</a><ul>
<li><a href="#lamp">LAMP</a><ul>
<li><a href="#什么是lamp">什么是LAMP</a></li>
<li><a href="#php连接数据库">PHP连接数据库</a></li>
</ul>
</li>
<li><a href="#php的配置文件">PHP的配置文件</a><ul>
<li><a href="#主要配置">主要配置</a></li>
</ul>
</li>
<li><a href="#基于lamp的应用">基于LAMP的应用</a><ul>
<li><a href="#phpmyadmin">phpMyAdmin</a></li>
<li><a href="#wordpress">WordPress</a></li>
<li><a href="#phpwind">PHPWind</a></li>
<li><a href="#crossday-discuz-board">Crossday Discuz! Board</a></li>
</ul>
</li>
<li><a href="#fast-cgi">fast CGI</a><ul>
<li><a href="#安装包">安装包</a></li>
<li><a href="#配置fast-cgi">配置FAST CGI</a></li>
</ul>
</li>
<li><a href="#centos6编译安装实现lamp下的wordpress">Centos6编译安装实现LAMP下的WordPress</a></li>
<li><a href="#注">注</a></li>
</ul>
</li>
</ul>
<!-- /code_chunk_output -->
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><h3 id="LAMP"><a href="#LAMP" class="headerlink" title="LAMP"></a>LAMP</h3><h4 id="什么是LAMP"><a href="#什么是LAMP" class="headerlink" title="什么是LAMP"></a>什么是LAMP</h4><blockquote>
<p>L: Linux<br>A: Apache(httpd)<br>M: mysql,mariadb<br>M: memcache<br>P: PHP,Python,Perl</p>
</blockquote>
<p>*[LAMP]: linux,apache,mysql,php</p>
<h4 id="PHP连接数据库"><a href="#PHP连接数据库" class="headerlink" title="PHP连接数据库"></a>PHP连接数据库</h4><ol>
<li><p>Php使用mysql扩展连接数据库</p>
<figure class="highlight php"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用mysql扩展连接数据库的测试代码</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$conn = mysql_connect(‘mysqlserver<span class="string">','</span>username<span class="string">','</span>password<span class="string">');</span></span><br><span class="line"><span class="string">if ($conn)</span></span><br><span class="line"><span class="string">    echo "OK";</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">    echo "Failure";</span></span><br><span class="line"><span class="string">    echo mysql_error();</span></span><br><span class="line"><span class="string">mysql_close();</span></span><br><span class="line"><span class="string">?&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用mysqli扩展连接数据库</p>
<figure class="highlight php"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Php使用mysqli扩展连接数据库的测试代码</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$mysqli=<span class="keyword">new</span> mysqli(<span class="string">"mysqlserver"</span>,“username<span class="string">",“password"</span>);</span><br><span class="line"><span class="keyword">if</span>(mysqli_connect_errno())&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Failure"</span>;</span><br><span class="line">    $mysqli=<span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> “OK<span class="string">";</span></span><br><span class="line"><span class="string">$mysqli-&gt;close();</span></span><br><span class="line"><span class="string">?&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>pdo_mysql</p>
</li>
</ol>
<ul>
<li><strong>三种连接都包含在php-mysql包中</strong></li>
<li><strong>以上代码都是放置在PHP文件中的，用以测试PHP和数据库的连接</strong></li>
<li><strong>pdo方式兼容其他数据库的连接</strong></li>
</ul>
<hr>
<h3 id="PHP的配置文件"><a href="#PHP的配置文件" class="headerlink" title="PHP的配置文件"></a>PHP的配置文件</h3><blockquote>
<p>/etc/php.ini /etc/php.d/*.ini</p>
</blockquote>
<h4 id="主要配置"><a href="#主要配置" class="headerlink" title="主要配置"></a>主要配置</h4><ul>
<li>max_execution_time= 30 最长执行时间30s</li>
<li>memory_limit 128M 生产不够，可调大</li>
<li>display_errors off 调试使用，不要打开，否则可能暴露重要信息</li>
<li>display_startup_errors off 建议关闭</li>
<li>post_max_size 8M 最大上传数据大小，生产可能临时要调大，比下面项要大</li>
<li>upload_max_filesize 2M 最大上传文件，生产可能要调大</li>
<li>max_file_uploads = 20 同时上传最多文件数</li>
<li>date.timezone =Asia/Shanghai 指定时区</li>
<li>short_open_tag=on 开启短标签,如&lt;? phpinfo();?&gt;。默认值是on</li>
<li>php.ini的核心配置选项文档： <a href="http://php.net/manual/zh/ini.core.php" target="_blank" rel="noopener">http://php.net/manual/zh/ini.core.php</a></li>
<li>php.ini配置选项列表：<br><a href="http://php.net/manual/zh/ini.list.php" target="_blank" rel="noopener">http://php.net/manual/zh/ini.list.php</a></li>
<li>php语言格式<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">...php code...</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="基于LAMP的应用"><a href="#基于LAMP的应用" class="headerlink" title="基于LAMP的应用"></a>基于LAMP的应用</h3><h4 id="phpMyAdmin"><a href="#phpMyAdmin" class="headerlink" title="phpMyAdmin"></a>phpMyAdmin</h4><blockquote>
<p>PhpMyAdmin是一个以PHP为基础，以Web-Base方式架构在网站主机上的MySQL的数据库管理工具，让管理者可用Web接口管理MySQL数据库</p>
</blockquote>
<p>注意下载的安装包要适用于本机的PHP版本！</p>
<ol>
<li>下载phpMyAdin</li>
<li><p>解压到本机的网站目录的pma目录</p>
<figure class="highlight bash"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unzip phpMyAdin  </span><br><span class="line">mv phpMyAdin/* /app/website/pma/</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装可能缺省的mbstring包</p>
</li>
<li>在浏览器登陆<a href="http://127.0.0.1/pma" target="_blank" rel="noopener">http://127.0.0.1/pma</a> 即可查看管理数据库</li>
</ol>
<h2 id="默认是管理本机数据库的"><a href="#默认是管理本机数据库的" class="headerlink" title="* 默认是管理本机数据库的"></a>* 默认是管理本机数据库的</h2><h4 id="WordPress"><a href="#WordPress" class="headerlink" title="WordPress"></a>WordPress</h4><blockquote>
<p>WordPress是一种使用PHP语言开发的博客平台，用户可以在支持PHP和MySQL数据库的服务器上架设属于自己的网站。也可把 WordPress当作一个内容管理系统（CMS）来使用</p>
</blockquote>
<p>实现WordPress也需要数据库</p>
<ol>
<li>创建数据库</li>
<li>创建管理数据库的管理员(注意权限)</li>
<li>下载WordPress包</li>
<li>解压到本地网站目录下</li>
<li><p>修改数据库连接文件wp-config-sample权限()授予ACL权限即可</p>
<figure class="highlight bash"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl -R -m u:apache:rwx /app/website/wp</span><br></pre></td></tr></table></figure>
</li>
<li><p>在页面http:/127.0.0.1/wp下修改数据库连接，用户为数据库用户，最终生成wp-config.conf文件，并会在数据库中生成相应的数据文件</p>
</li>
<li>在页面配置站点信息</li>
<li>访问！！！</li>
</ol>
<hr>
<h4 id="PHPWind"><a href="#PHPWind" class="headerlink" title="PHPWind"></a>PHPWind</h4><blockquote>
<p>PHPWind:2003年发布了PHPWind的前身版本ofstar，并发展成为包含BBS、CMS、博客、SNS等一系列程序的通用型建站软件, 于2008年加入阿里巴巴集团</p>
</blockquote>
<hr>
<h4 id="Crossday-Discuz-Board"><a href="#Crossday-Discuz-Board" class="headerlink" title="Crossday Discuz! Board"></a>Crossday Discuz! Board</h4><blockquote>
<p>Crossday Discuz! Board（简称 Discuz!）是一套通用的社区论坛软件系统。自2001年6月面世以来，是全球成熟度最高、覆盖率最大的论坛软件系统之一。2010年8月23日，与腾讯达成收购协议</p>
</blockquote>
<hr>
<ul>
<li>ESChop<blockquote>
<p>ECShop是一款B2C独立网店系统，适合企业及个人快速构建个性化网上商店。系统是基于PHP语言及MYSQL数据库构架开发的跨平台开源程序。2006年6月，ECShop推出第一个版本1.0</p>
</blockquote>
</li>
</ul>
<h3 id="fast-CGI"><a href="#fast-CGI" class="headerlink" title="fast CGI"></a>fast CGI</h3><h4 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h4><figure class="highlight bash"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install php-fpm php-mysql httpd mariadb</span><br></pre></td></tr></table></figure>
<p>####配置FAST CGI</p>
<h2 id="1-16-00"><a href="#1-16-00" class="headerlink" title="1. 16.00"></a>1. 16.00</h2><h3 id="Centos6编译安装实现LAMP下的WordPress"><a href="#Centos6编译安装实现LAMP下的WordPress" class="headerlink" title="Centos6编译安装实现LAMP下的WordPress"></a>Centos6编译安装实现LAMP下的WordPress</h3><ol>
<li>下载源码</li>
<li><p>安装编译环境包组</p>
<figure class="highlight bash"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum group-install <span class="string">"development tools"</span></span><br><span class="line">yum install openssl-devel pcre-devel expat-devel</span><br></pre></td></tr></table></figure>
</li>
<li><p>解压各包，创建Apache用户<br><code>tar  ---</code></p>
</li>
<li><p>编译安装httpd </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./config</span><br><span class="line">make &amp;&amp;make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装数据库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">useradd -r -s /sbin/nologin mysql</span><br><span class="line"><span class="built_in">cd</span> /mysql</span><br><span class="line">mkdir /data/mysqldb</span><br><span class="line">chown -R mysql.mysql /data/mysqldb</span><br><span class="line">./scripts/mysql_install_db --datadir=<span class="string">"/data/mysqldb"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>配置数据库文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> support-files</span><br><span class="line">cp huge---  my.cnf</span><br><span class="line">vim my.cnf</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>启动数据库<br><code>service mysqld start</code></p>
</li>
<li>写入PATH变量<br><code></code></li>
<li>解压php</li>
<li>安装开发包组</li>
<li><p>编译安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./configure </span><br><span class="line">make -j 4 &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改php配置文件</p>
</li>
<li>创建php-fpm启动项</li>
<li>修改httpd配置使支持fcgi<br>vim /etc/httpd/conf/httpd.conf</li>
</ol>
<p>配置httpd支持php<br>vim /app/httpd24/conf/httpd.conf<br>取消下面两行的注释<br>LoadModule proxy_module modules/mod_proxy.so<br>LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so<br>修改下面行</p>
<p><ifmodule dir_module=""><br>DirectoryIndex index.php index.html<br></ifmodule><br>加下面四行<br>AddType application/x-httpd-php .php<br>AddType application/x-httpd-php-source .phps<br>ProxyRequests Off<br>ProxyPassMatch ^/(.*.php)$ fcgi://127.0.0.1:9000/app/httpd24/htdocs/$1</p>
<hr>
<h3 id="注"><a href="#注" class="headerlink" title="注"></a>注</h3><blockquote>
<ul>
<li>php程序中的时间通常是UTC时间，需要修改配置文件才能使之显示服务器时间！</li>
<li>动态页面的访问速度相比静态页面相差较多！静态页面访问速度更快！解决方式是可以将动态页面转换为静态页面以供访问。或者使用<strong>fast CGI</strong></li>
</ul>
</blockquote>
<hr>
<p>devaron.com<br>sss.devaron.com mujin_2458 17854278640 1490891258@qq.com</p>
<p>记录<br>MX mx.ym.163.com 10</p>

 
                <!-- Meta -->
                <div class="post-meta">
                    <hr>
                    <br>
                    <div class="post-tags">
                        
                    </div>
                    <div class="post-date">
                        2018 年 02 月 06 日
                    </div>
                </div>
            </div>

            <!-- Comments -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- Disqus Comments -->


            </div>
        </div>
    </div>
</article>
</section>

    <!-- Scripts -->
    <!-- jQuery -->
<script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script type="text/javascript">
	console.log('Hexo-theme-hollow designed by zchen9 🙋 © 2015-' + (new Date()).getFullYear());
</script>

    <!-- Google Analytics -->
    

</body>

</html>